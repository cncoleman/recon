{"config":{"sparqlEndpoint":"http://ldf.fi/emlo/sparql","pageSize":15,"matchQuery":"\n          PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n          PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n          PREFIX text: <http://jena.apache.org/text#>\n          PREFIX pf: <http://jena.hpl.hp.com/ARQ/property#>\n          PREFIX sf: <http://ldf.fi/similarity-functions#>\n          PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>\n          PREFIX emlos: <http://emlo.bodleian.ox.ac.uk/schema#>\n          PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\n          SELECT ?queryId ?entity (SAMPLE(?l) AS ?label)  (GROUP_CONCAT(DISTINCT ?al;separator=\", \") AS ?alabel) (CONCAT(MAX(?bwarning),MAX(?dwarning)) AS ?warning) (GROUP_CONCAT(DISTINCT ?pl;separator=\", \") AS ?plabel) (MAX(?sc) AS ?score) (SAMPLE(?url) AS ?link) {\n            { # QUERY\n              {\n                SELECT ?e ?mlabel (SUM(?s)/COUNT(?s) AS ?sc) {\n                  {\n                    SELECT ?e {\n                      BIND(REPLACE(REPLACE(REPLACE(REPLACE(<QUERY>,\"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\/\\\\^\\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\\\\\])\",\"\\\\\\\\$1\"),\"^ +| +$\", \"\"),\",\",\"\"),\"\\\\. \",\"* \") AS ?escapedQuery)\n                      BIND(CONCAT(\"(\",?escapedQuery,\") OR (\",REPLACE(?escapedQuery,\"([^*]) +\",\"$1~0.8 \"),\"~0.8)\") AS ?queryTerm)\n                      ?e text:query ?queryTerm .\n                      ?e a crm:E21_Person .\n                    }\n                    LIMIT 30\n                  }\n                  ?e rdfs:label|skos:prefLabel|skos:altLabel ?mlabel .\n                  ?str pf:strSplit (<QUERY> \" \")\n                  BIND(sf:levenshteinSubstring(?str,STR(?mlabel)) AS ?s)\n                } GROUP BY ?e ?mlabel\n              }\n              BIND(<QUERY_ID> AS ?queryId)\n              FILTER(BOUND(?e))\n    \t\t  OPTIONAL {\n      \t\t    ?e emlos:deathDate/crm:P82b_end_of_the_end ?dd .\n                BIND(IF(STRDT(<CELL_1>,xsd:integer)>YEAR(?dd),\"Died before! \",\"\") AS ?dwarning)\n    \t\t  }\n    \t\t  OPTIONAL {\n      \t\t    ?e emlos:birthDate/crm:P82a_begin_of_the_begin ?bd .\n                BIND(IF(YEAR(?bd)>STRDT(<CELL_2>,xsd:integer),\"Wasn't born! \",\"\") AS ?bwarning)\n    \t\t  }\n            } # /QUERY\n            ?e skos:prefLabel ?l .\n            ?e emlos:ipersonId ?entity .\n            OPTIONAL {\n              ?e ((^emlos:cofk_union_relationship_type-was_addressed_to/emlos:cofk_union_relationship_type-was_sent_to)|(emlos:cofk_union_relationship_type-created/emlos:cofk_union_relationship_type-was_sent_from))/skos:prefLabel ?pl .\n            }\n            OPTIONAL {\n              ?e skos:altLabel ?al .\n            }\n  \t\t\tBIND(CONCAT('<a href=\"https://emlo-edit.bodleian.ox.ac.uk/interface/union.php?class_name=person&method_name=one_person_search_results&iperson_id=',?entity,'&opening_method=db_search_results\" target=\"_blank\">[o]</a>') AS ?url)\n          }\n          GROUP BY ?queryId ?entity\n          ORDER BY ?queryId DESC(?score)\n        "},"state":null}